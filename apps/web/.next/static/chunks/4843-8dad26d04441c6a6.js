"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4843],{4843:(e,a,t)=>{t.d(a,{default:()=>Z});var s=t(7589),l=t(273),r=t(2212),i=t(8379),n=t(5175),c=t(9390),d=t(4977),o=t(7568),u=t(4969),x=t(3618),m=t(7728),p=t(9328),h=t(2331),v=t(706),f=t(9423);function j(e){let{id:a,icon:t,label:l}=e,{attributes:i,listeners:n,setNodeRef:c,transform:d}=(0,r.PM)({id:a}),o=d?{transform:"translate3d(".concat(d.x,"px, ").concat(d.y,"px, 0)")}:void 0;return(0,s.jsxs)("div",{ref:c,style:o,...n,...i,className:"flex cursor-pointer items-center gap-2 rounded-md border p-3 transition-colors hover:bg-gray-200 hover:dark:bg-zinc-800",children:[(0,s.jsx)("div",{className:"text-primary",children:t}),(0,s.jsx)("span",{children:l})]})}function b(){let e=[{type:"text",icon:(0,s.jsx)(d.A,{size:18}),label:"Text Input"},{type:"textarea",icon:(0,s.jsx)(o.A,{size:18}),label:"Text Area"},{type:"number",icon:(0,s.jsx)(u.A,{size:18}),label:"Number"},{type:"select",icon:(0,s.jsx)(x.A,{size:18}),label:"Select"},{type:"checkbox",icon:(0,s.jsx)(m.A,{size:18}),label:"Checkbox"},{type:"radio",icon:(0,s.jsx)(p.A,{size:18}),label:"Radio Group"},{type:"date",icon:(0,s.jsx)(h.A,{size:18}),label:"Date"},{type:"email",icon:(0,s.jsx)(v.A,{size:18}),label:"Email"},{type:"file",icon:(0,s.jsx)(f.A,{size:18}),label:"File Upload"}];return(0,s.jsxs)(c.Zp,{className:"h-fit w-full lg:w-64",children:[(0,s.jsx)(c.aR,{children:(0,s.jsx)(c.ZB,{children:"Form Elements"})}),(0,s.jsx)(c.Wu,{children:(0,s.jsx)("div",{className:"flex flex-col gap-2",children:e.map(e=>(0,s.jsx)(j,{id:"sidebar-".concat(e.type),icon:e.icon,label:e.label},e.type))})})]})}var g=t(7284),y=t(6348),N=t(8980),w=t(4144),k=t(4734),z=t(1423),C=t(4764),F=t(6198),A=t(1115),E=t(3350);function T(e){let{...a}=e;return(0,s.jsx)(A.bL,{"data-slot":"popover",...a})}function I(e){let{...a}=e;return(0,s.jsx)(A.l9,{"data-slot":"popover-trigger",...a})}function S(e){let{className:a,align:t="center",sideOffset:l=4,...r}=e;return(0,s.jsx)(A.ZL,{children:(0,s.jsx)(A.UC,{"data-slot":"popover-content",align:t,sideOffset:l,className:(0,E.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-(--radix-popover-content-transform-origin) outline-hidden z-50 w-72 rounded-md border p-4 shadow-md",a),...r})})}var P=t(5992),q=t(9682),J=t(4129),K=t(9737),D=t(4261);function O(e){let{element:a,updateElement:t,onClose:l}=e,{attributes:r}=a,i=(e,s)=>{t(a.id,{[e]:s})},n=()=>{switch(a.type){case"text":case"email":return(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(k.J,{htmlFor:"placeholder",children:"Placeholder"}),(0,s.jsx)(w.p,{id:"placeholder",value:r.placeholder||"",onChange:e=>i("placeholder",e.target.value)})]});case"textarea":return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(k.J,{htmlFor:"placeholder",children:"Placeholder"}),(0,s.jsx)(w.p,{id:"placeholder",value:r.placeholder||"",onChange:e=>i("placeholder",e.target.value)})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(k.J,{htmlFor:"rows",children:"Rows"}),(0,s.jsx)(w.p,{id:"rows",type:"number",min:1,value:r.rows||3,onChange:e=>i("rows",Number.parseInt(e.target.value))})]})]});case"number":return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(k.J,{htmlFor:"placeholder",children:"Placeholder"}),(0,s.jsx)(w.p,{id:"placeholder",value:r.placeholder||"",onChange:e=>i("placeholder",e.target.value)})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(k.J,{htmlFor:"min",children:"Min Value"}),(0,s.jsx)(w.p,{id:"min",type:"number",value:r.min||0,onChange:e=>i("min",Number.parseInt(e.target.value))})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(k.J,{htmlFor:"max",children:"Max Value"}),(0,s.jsx)(w.p,{id:"max",type:"number",value:r.max||100,onChange:e=>i("max",Number.parseInt(e.target.value))})]})]})]});case"select":case"radio":return(0,s.jsx)(_,{element:a,updateElement:t});case"file":return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(k.J,{htmlFor:"acceptedFileTypes",children:"Accepted File Types"}),(0,s.jsx)(w.p,{id:"acceptedFileTypes",value:r.acceptedFileTypes||".pdf,.doc,.docx,.jpg,.jpeg,.png",onChange:e=>i("acceptedFileTypes",e.target.value),placeholder:".pdf,.doc,.jpg"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Comma-separated file extensions (e.g., .pdf,.jpg)"})]}),(0,s.jsxs)("div",{className:"mt-4 flex items-center space-x-2",children:[(0,s.jsx)(N.S,{id:"multiple",checked:r.multiple||!1,onCheckedChange:e=>i("multiple",e)}),(0,s.jsx)(k.J,{htmlFor:"multiple",children:"Allow multiple files"})]})]});default:return null}};return(0,s.jsxs)("div",{className:"space-y-4 p-1",children:[(0,s.jsx)("h3",{className:"font-medium",children:"Element Settings"}),(0,s.jsx)(K.w,{}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(k.J,{htmlFor:"label",children:"Label"}),(0,s.jsx)(w.p,{id:"label",value:r.label||"",onChange:e=>i("label",e.target.value)})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(N.S,{id:"required",checked:r.required||!1,onCheckedChange:e=>i("required",e)}),(0,s.jsx)(k.J,{htmlFor:"required",children:"Required field"})]})]}),n()&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(K.w,{}),n()]}),(0,s.jsx)("div",{className:"flex justify-end pt-2",children:(0,s.jsx)(y.$,{onClick:l,children:"Done"})})]})}function _(e){let{element:a,updateElement:t}=e,r=a.attributes.options||[],[i,n]=(0,l.useState)({label:"",value:""}),c=e=>{let s=r.filter((a,t)=>t!==e);t(a.id,{options:s})},d=(e,s,l)=>{let i=[...r];i[e]={...i[e],[s]:l},t(a.id,{options:i})};return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(k.J,{children:"Options"}),(0,s.jsx)("div",{className:"space-y-2",children:r.map((e,a)=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(w.p,{placeholder:"Label",value:e.label,onChange:e=>d(a,"label",e.target.value),className:"flex-1"}),(0,s.jsx)(w.p,{placeholder:"Value",value:e.value,onChange:e=>d(a,"value",e.target.value),className:"flex-1"}),(0,s.jsx)(y.$,{variant:"ghost",size:"icon",onClick:()=>c(a),className:"h-8 w-8 text-red-500 hover:bg-red-50 hover:text-red-600",children:(0,s.jsx)(q.A,{size:16})})]},a))}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(w.p,{placeholder:"Label",value:i.label,onChange:e=>n({...i,label:e.target.value}),className:"flex-1"}),(0,s.jsx)(w.p,{placeholder:"Value",value:i.value,onChange:e=>n({...i,value:e.target.value}),className:"flex-1"}),(0,s.jsx)(y.$,{variant:"outline",size:"icon",onClick:()=>{if(!i.label.trim()||!i.value.trim())return;let e=[...r,{...i}];t(a.id,{options:e}),n({label:"",value:""})},className:"h-8 w-8",disabled:!i.label.trim()||!i.value.trim(),children:(0,s.jsx)(D.A,{size:16})})]})]})}function R(e){let{element:a,isOverlay:t=!1,updateElement:r,removeElement:n}=e,[j,b]=(0,l.useState)(!1),{attributes:A,listeners:E,setNodeRef:K,transform:D,transition:_,isDragging:R}=(0,i.gl)({id:a.id,disabled:t}),L={transform:g.Ks.Transform.toString(D),transition:_,opacity:R?.5:1};return(0,s.jsxs)(c.Zp,{ref:K,style:L,className:"".concat(t?"w-64":"w-full"),children:[(0,s.jsxs)(c.aR,{className:"flex flex-row items-center justify-between border-b p-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"text-gray-500",children:(()=>{switch(a.type){case"text":default:return(0,s.jsx)(d.A,{size:18});case"textarea":return(0,s.jsx)(o.A,{size:18});case"number":return(0,s.jsx)(u.A,{size:18});case"select":return(0,s.jsx)(x.A,{size:18});case"checkbox":return(0,s.jsx)(m.A,{size:18});case"radio":return(0,s.jsx)(p.A,{size:18});case"date":return(0,s.jsx)(h.A,{size:18});case"email":return(0,s.jsx)(v.A,{size:18});case"file":return(0,s.jsx)(f.A,{size:18})}})()}),(0,s.jsx)("span",{className:"font-medium",children:a.attributes.label})]}),!t&&(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsxs)(T,{open:j,onOpenChange:b,children:[(0,s.jsx)(I,{asChild:!0,children:(0,s.jsx)(y.$,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,s.jsx)(P.A,{size:16})})}),(0,s.jsx)(S,{align:"end",className:"w-80",children:(0,s.jsx)(O,{element:a,updateElement:r,onClose:()=>b(!1)})})]}),(0,s.jsx)(y.$,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-500 hover:bg-red-50 hover:text-red-600",onClick:()=>n(a.id),children:(0,s.jsx)(q.A,{size:16})}),(0,s.jsx)(y.$,{variant:"ghost",size:"icon",className:"h-8 w-8 cursor-move",...A,...E,children:(0,s.jsx)(J.A,{size:16})})]})]}),(0,s.jsx)(c.Wu,{className:"p-4",children:(()=>{var e,t;let{attributes:l}=a;switch(a.type){case"text":return(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(k.J,{children:l.label}),(0,s.jsx)(w.p,{placeholder:l.placeholder})]});case"textarea":return(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(k.J,{children:l.label}),(0,s.jsx)(F.T,{placeholder:l.placeholder,rows:l.rows})]});case"number":return(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(k.J,{children:l.label}),(0,s.jsx)(w.p,{type:"number",placeholder:l.placeholder,min:l.min,max:l.max})]});case"select":return(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(k.J,{children:l.label}),(0,s.jsxs)(C.l6,{children:[(0,s.jsx)(C.bq,{children:(0,s.jsx)(C.yv,{placeholder:l.placeholder})}),(0,s.jsx)(C.gC,{children:null===(e=l.options)||void 0===e?void 0:e.map((e,a)=>(0,s.jsx)(C.eb,{value:e.value,children:e.label},a))})]})]});case"checkbox":return(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(N.S,{id:"checkbox-".concat(a.id)}),(0,s.jsx)(k.J,{htmlFor:"checkbox-".concat(a.id),children:l.label})]});case"radio":return(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(k.J,{children:l.label}),(0,s.jsx)(z.z,{children:null===(t=l.options)||void 0===t?void 0:t.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(z.C,{value:e.value,id:"radio-".concat(a.id,"-").concat(t)}),(0,s.jsx)(k.J,{htmlFor:"radio-".concat(a.id,"-").concat(t),children:e.label})]},t))})]});case"date":return(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(k.J,{children:l.label}),(0,s.jsx)(w.p,{type:"date"})]});case"email":return(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(k.J,{children:l.label}),(0,s.jsx)(w.p,{type:"email",placeholder:l.placeholder})]});case"file":return(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(k.J,{children:l.label}),(0,s.jsx)(w.p,{type:"file",multiple:l.multiple,accept:l.acceptedFileTypes,className:"cursor-pointer"})]});default:return(0,s.jsx)("div",{children:"Unknown element type"})}})()}),a.attributes.required&&(0,s.jsx)(c.wL,{className:"p-2 pt-0 text-xs text-red-500",children:"* Required field"})]})}function L(e){let{elements:a,updateElement:t,removeElement:l}=e,{setNodeRef:n}=(0,r.zM)({id:"canvas"});return(0,s.jsx)("div",{ref:n,className:"min-h-[400px] rounded-md border p-4",children:0===a.length?(0,s.jsx)("div",{className:"flex h-full items-center justify-center p-8 text-center text-gray-400",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"mb-2 text-lg",children:"Your form is empty"}),(0,s.jsx)("p",{children:"Drag elements from the sidebar and drop them here"})]})}):(0,s.jsx)(i.gB,{items:a.map(e=>e.id),strategy:i._G,children:(0,s.jsx)("div",{className:"flex flex-col gap-4",children:a.map(e=>(0,s.jsx)(R,{element:e,updateElement:t,removeElement:l},e.id))})})})}var U=t(6096),V=t(2748),Q=t(3497),$=t(7101),M=t(6136),G=t(7018),B=t(6105);function Z(e){let{initialForm:a}=e,[t,c]=(0,l.useState)((null==a?void 0:a.title)||""),[d,o]=(0,l.useState)((null==a?void 0:a.description)||""),[u,x]=(0,l.useState)((null==a?void 0:a.value)||0),[m,p]=(0,l.useState)((null==a?void 0:a.elements)||[]),[h,v]=(0,l.useState)(null),[f,j]=(0,l.useState)(null),[g,N]=(0,l.useState)(!1),{mutate:z}=(0,G.xx)(),C=(0,B.useRouter)();function F(e){switch(e){case"text":return{label:"Text Input",placeholder:"Enter text...",required:!1};case"textarea":return{label:"Text Area",placeholder:"Enter long text...",required:!1,rows:3};case"number":return{label:"Number Input",placeholder:"Enter a number",required:!1,min:0,max:100};case"select":return{label:"Select",placeholder:"Select an option",required:!1,options:[{label:"Option 1",value:"option1"},{label:"Option 2",value:"option2"},{label:"Option 3",value:"option3"}]};case"checkbox":return{label:"Checkbox",required:!1};case"radio":return{label:"Radio Group",required:!1,options:[{label:"Option 1",value:"option1"},{label:"Option 2",value:"option2"},{label:"Option 3",value:"option3"}]};case"date":return{label:"Date Picker",required:!1};case"email":return{label:"Email Input",placeholder:"Enter email...",required:!1};case"file":return{label:"File Upload",required:!1,multiple:!1,acceptedFileTypes:".pdf,.doc,.docx,.jpg,.jpeg,.png"};default:return{label:"New Field",required:!1}}}return(0,s.jsxs)(r.Mp,{onDragStart:function(e){let{active:a}=e;if(v(a.id),"string"==typeof a.id&&a.id.includes("sidebar-")){let e=a.id.replace("sidebar-","");j({id:"element-".concat(Date.now()),type:e,attributes:F(e)})}else{let e=m.find(e=>e.id===a.id);e&&j(e)}},onDragEnd:function(e){let{active:a,over:t}=e;if(v(null),j(null),!t)return;if("string"==typeof a.id&&a.id.includes("sidebar-")){let e=a.id.replace("sidebar-","");p([...m,{id:"element-".concat(Date.now()),type:e,attributes:F(e)}]);return}let s=m.findIndex(e=>e.id===a.id),l=m.findIndex(e=>e.id===t.id);-1!==s&&-1!==l&&p((0,i.be)(m,s,l))},collisionDetection:r.fp,modifiers:[n.FN,n.Q_],children:[(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)(k.J,{className:"mb-2 text-lg font-medium",children:"KPI"}),(0,s.jsx)("p",{className:"mb-2 text-sm text-gray-500",children:"KPI identification number, usually between 1 to 78."}),(0,s.jsx)(w.p,{id:"form-title",value:t.replace("KPI",""),onChange:e=>{let a=e.target.value.replace(/\D/g,"");c("KPI ".concat(a))},className:"text-lg font-medium",placeholder:"Enter KPI Number"})]}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)(k.J,{className:"mb-2 text-lg font-medium",children:"Description"}),(0,s.jsx)("p",{className:"mb-2 text-sm text-gray-500",children:"A short description of what this KPI is and what faculty is expected to fill."}),(0,s.jsx)(w.p,{id:"form-description",value:d,required:!0,onChange:e=>o(e.target.value),className:"text-lg font-medium",placeholder:"Enter KPI Description"})]}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)(k.J,{className:"mb-2 text-lg font-medium",children:"Value"}),(0,s.jsx)("p",{className:"mb-2 text-sm text-gray-500",children:"Value of each KPI in a specific metric."}),(0,s.jsx)(w.p,{id:"form-value",type:"number",required:!0,value:u,onChange:e=>x(Number(e.target.value)),className:"text-lg font-medium",placeholder:"Enter KPI Value"})]}),(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)(k.J,{className:"mb-2 text-lg font-medium",children:"Upload KPI Template"}),(0,s.jsx)("p",{className:"mb-2 text-sm text-gray-500",children:"Upload an Excel template for this KPI. This will help faculty understand the expected format."}),(0,s.jsx)(w.p,{id:"template-upload",type:"file",accept:".xlsx,.xls",onChange:e=>{var a;(null===(a=e.target.files)||void 0===a?void 0:a[0])&&Q.toast.success("Template uploaded successfully")},className:"text-lg font-medium"})]})})]})}),(0,s.jsxs)("div",{className:"flex flex-col gap-6 lg:flex-row",children:[(0,s.jsx)(b,{}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsxs)(U.Tabs,{defaultValue:"editor",children:[(0,s.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,s.jsxs)(U.TabsList,{children:[(0,s.jsx)(U.TabsTrigger,{value:"editor",children:"Editor"}),(0,s.jsx)(U.TabsTrigger,{value:"preview",children:"Preview"})]}),(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsx)(y.$,{onClick:()=>{if(!t.trim()||"KPI"===t.trim()){Q.toast.error("Empty KPI Number",{description:"Form title must include a KPI number."});return}if(0===m.length){Q.toast.warning("Cannot save empty form",{description:"Please add at least one element to your form"});return}try{let e={id:"form-".concat(Date.now()),title:t,elements:m,description:d,value:u,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};z(e),setTimeout(()=>C.push("/qoc/builder"),2e3)}catch(e){console.error("Unexpected error in handleSaveForm:",e),(0,Q.toast)("Unexpected Error",{description:"An unexpected error occurred. Please try again."})}},disabled:g,children:g?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)($.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(M.A,{className:"mr-2 h-4 w-4"}),"Save KPI"]})})})]}),(0,s.jsx)(U.TabsContent,{value:"editor",className:"mt-0",children:(0,s.jsx)(i.gB,{items:m.map(e=>e.id),strategy:i._G,children:(0,s.jsx)(L,{elements:m,updateElement:function(e,a){p(m.map(t=>t.id===e?{...t,attributes:{...t.attributes,...a}}:t))},removeElement:function(e){p(m.filter(a=>a.id!==e))}})})}),(0,s.jsx)(U.TabsContent,{value:"preview",className:"mt-0",children:(0,s.jsx)(V.default,{formTitle:t,elements:m})})]})})]}),(0,s.jsx)(r.Hd,{children:h&&f&&(0,s.jsx)("div",{className:"opacity-80",children:(0,s.jsx)(R,{element:f,isOverlay:!0,updateElement:()=>{},removeElement:()=>{}})})})]})}},6096:(e,a,t)=>{t.d(a,{Tabs:()=>i,TabsContent:()=>d,TabsList:()=>n,TabsTrigger:()=>c});var s=t(7589);t(273);var l=t(8462),r=t(3350);function i(e){let{className:a,...t}=e;return(0,s.jsx)(l.bL,{"data-slot":"tabs",className:(0,r.cn)("flex flex-col gap-2",a),...t})}function n(e){let{className:a,...t}=e;return(0,s.jsx)(l.B8,{"data-slot":"tabs-list",className:(0,r.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",a),...t})}function c(e){let{className:a,...t}=e;return(0,s.jsx)(l.l9,{"data-slot":"tabs-trigger",className:(0,r.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 whitespace-nowrap rounded-md border border-transparent px-2 py-1 text-sm font-medium transition-[color,box-shadow] focus-visible:outline-1 focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg:not([class*='size-'])]:size-4 [&_svg]:pointer-events-none [&_svg]:shrink-0",a),...t})}function d(e){let{className:a,...t}=e;return(0,s.jsx)(l.UC,{"data-slot":"tabs-content",className:(0,r.cn)("flex-1 outline-none",a),...t})}},6348:(e,a,t)=>{t.d(a,{$:()=>c});var s=t(7589);t(273);var l=t(2544),r=t(7135),i=t(3350);let n=(0,r.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function c(e){let{className:a,variant:t,size:r,asChild:c=!1,...d}=e,o=c?l.DX:"button";return(0,s.jsx)(o,{"data-slot":"button",className:(0,i.cn)(n({variant:t,size:r,className:a})),...d})}},7018:(e,a,t)=>{t.d(a,{Pm:()=>o,Sr:()=>h,pH:()=>m,xx:()=>x});var s=t(7587),l=t(3269),r=t(2110),i=t(6896),n=t(295),c=t(3497);let d=async()=>(await n.A.get("/api/forms")).data.kpis;function o(){return(0,l.useQuery)({queryKey:["forms"],queryFn:d,staleTime:3e5,refetchOnWindowFocus:!1})}let u=async e=>{try{return(await n.A.post("/api/forms",e)).data}catch(e){var a,t;throw new s.y({name:"PROCESSING_ERROR",message:(null===(t=e.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.error)||"Failed to save form",cause:e})}};function x(){let e=(0,r.useQueryClient)();return(0,i.useMutation)({mutationFn:u,onSuccess:()=>{c.toast.success("Form saved successfully",{description:"Your form has been saved successfully"}),e.invalidateQueries({queryKey:["forms"]})},onError:e=>{c.toast.error("Error saving form",{description:e.message}),console.error("Save form error:",e.name,e.cause)}})}function m(){let e=(0,r.useQueryClient)();return(0,i.useMutation)({mutationFn:async e=>(await n.A.delete("/api/kpi/".concat(e))).data,onSuccess:()=>{c.toast.success("KPI deleted successfully",{description:"The KPI has been deleted from the backend"}),e.invalidateQueries({queryKey:["kpi"]}),e.invalidateQueries({queryKey:["forms"]})},onError:e=>{c.toast.error("Error deleting KPI",{description:e.message}),console.error("Error deleting KPI:",e)}})}let p=async e=>{let{data:a}=await n.A.get("/api/kpi/".concat(e));return console.log("Fetched form data:",a),a},h=e=>(0,l.useQuery)({queryKey:["form",e],queryFn:()=>p(e),enabled:!!e})},7587:(e,a,t)=>{t.d(a,{y:()=>s});class s extends Error{constructor({name:e,message:a,cause:t}){super(a),this.name=e,this.message=a,this.cause=t}}},9737:(e,a,t)=>{t.d(a,{w:()=>i});var s=t(7589);t(273);var l=t(3991),r=t(3350);function i(e){let{className:a,orientation:t="horizontal",decorative:i=!0,...n}=e;return(0,s.jsx)(l.b,{"data-slot":"separator-root",decorative:i,orientation:t,className:(0,r.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=vertical]:h-full data-[orientation=horizontal]:w-full data-[orientation=vertical]:w-px",a),...n})}}}]);