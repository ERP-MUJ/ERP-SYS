(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1982],{1355:(e,t,r)=>{"use strict";r.d(t,{C1:()=>R,bL:()=>E});var a=r(273),n=r(9305),s=r(4799),i=r(7238),o=r(1638),d=r(6954),l=r(5458),c=r(805),u=r(6608),p=r(7589),f="Checkbox",[v,m]=(0,s.A)(f),[h,y]=v(f),b=a.forwardRef((e,t)=>{let{__scopeCheckbox:r,name:s,checked:d,defaultChecked:l,required:c,disabled:f,value:v="on",onCheckedChange:m,form:y,...b}=e,[x,g]=a.useState(null),E=(0,n.s)(t,e=>g(e)),R=a.useRef(!1),C=!x||y||!!x.closest("form"),[N=!1,P]=(0,o.i)({prop:d,defaultProp:l,onChange:m}),I=a.useRef(N);return a.useEffect(()=>{let e=null==x?void 0:x.form;if(e){let t=()=>P(I.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[x,P]),(0,p.jsxs)(h,{scope:r,state:N,disabled:f,children:[(0,p.jsx)(u.sG.button,{type:"button",role:"checkbox","aria-checked":w(N)?"mixed":N,"aria-required":c,"data-state":j(N),"data-disabled":f?"":void 0,disabled:f,value:v,...b,ref:E,onKeyDown:(0,i.m)(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,i.m)(e.onClick,e=>{P(e=>!!w(e)||!e),C&&(R.current=e.isPropagationStopped(),R.current||e.stopPropagation())})}),C&&(0,p.jsx)(k,{control:x,bubbles:!R.current,name:s,value:v,checked:N,required:c,disabled:f,form:y,style:{transform:"translateX(-100%)"},defaultChecked:!w(l)&&l})]})});b.displayName=f;var x="CheckboxIndicator",g=a.forwardRef((e,t)=>{let{__scopeCheckbox:r,forceMount:a,...n}=e,s=y(x,r);return(0,p.jsx)(c.C,{present:a||w(s.state)||!0===s.state,children:(0,p.jsx)(u.sG.span,{"data-state":j(s.state),"data-disabled":s.disabled?"":void 0,...n,ref:t,style:{pointerEvents:"none",...e.style}})})});g.displayName=x;var k=e=>{let{control:t,checked:r,bubbles:n=!0,defaultChecked:s,...i}=e,o=a.useRef(null),c=(0,d.Z)(r),u=(0,l.X)(t);a.useEffect(()=>{let e=o.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(c!==r&&t){let a=new Event("click",{bubbles:n});e.indeterminate=w(r),t.call(e,!w(r)&&r),e.dispatchEvent(a)}},[c,r,n]);let f=a.useRef(!w(r)&&r);return(0,p.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:null!=s?s:f.current,...i,tabIndex:-1,ref:o,style:{...e.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function w(e){return"indeterminate"===e}function j(e){return w(e)?"indeterminate":e?"checked":"unchecked"}var E=b,R=g},3076:(e,t,r)=>{"use strict";r.d(t,{C1:()=>O,bL:()=>F,q7:()=>S});var a=r(273),n=r(7238),s=r(9305),i=r(4799),o=r(6608),d=r(1814),l=r(1638),c=r(8534),u=r(5458),p=r(6954),f=r(805),v=r(7589),m="Radio",[h,y]=(0,i.A)(m),[b,x]=h(m),g=a.forwardRef((e,t)=>{let{__scopeRadio:r,name:i,checked:d=!1,required:l,disabled:c,value:u="on",onCheck:p,form:f,...m}=e,[h,y]=a.useState(null),x=(0,s.s)(t,e=>y(e)),g=a.useRef(!1),k=!h||f||!!h.closest("form");return(0,v.jsxs)(b,{scope:r,checked:d,disabled:c,children:[(0,v.jsx)(o.sG.button,{type:"button",role:"radio","aria-checked":d,"data-state":E(d),"data-disabled":c?"":void 0,disabled:c,value:u,...m,ref:x,onClick:(0,n.m)(e.onClick,e=>{d||null==p||p(),k&&(g.current=e.isPropagationStopped(),g.current||e.stopPropagation())})}),k&&(0,v.jsx)(j,{control:h,bubbles:!g.current,name:i,value:u,checked:d,required:l,disabled:c,form:f,style:{transform:"translateX(-100%)"}})]})});g.displayName=m;var k="RadioIndicator",w=a.forwardRef((e,t)=>{let{__scopeRadio:r,forceMount:a,...n}=e,s=x(k,r);return(0,v.jsx)(f.C,{present:a||s.checked,children:(0,v.jsx)(o.sG.span,{"data-state":E(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:t})})});w.displayName=k;var j=e=>{let{control:t,checked:r,bubbles:n=!0,...s}=e,i=a.useRef(null),o=(0,p.Z)(r),d=(0,u.X)(t);return a.useEffect(()=>{let e=i.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(o!==r&&t){let a=new Event("click",{bubbles:n});t.call(e,r),e.dispatchEvent(a)}},[o,r,n]),(0,v.jsx)("input",{type:"radio","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:i,style:{...e.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function E(e){return e?"checked":"unchecked"}var R=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],C="RadioGroup",[N,P]=(0,i.A)(C,[d.RG,y]),I=(0,d.RG)(),A=y(),[K,L]=N(C),q=a.forwardRef((e,t)=>{let{__scopeRadioGroup:r,name:a,defaultValue:n,value:s,required:i=!1,disabled:u=!1,orientation:p,dir:f,loop:m=!0,onValueChange:h,...y}=e,b=I(r),x=(0,c.jH)(f),[g,k]=(0,l.i)({prop:s,defaultProp:n,onChange:h});return(0,v.jsx)(K,{scope:r,name:a,required:i,disabled:u,value:g,onValueChange:k,children:(0,v.jsx)(d.bL,{asChild:!0,...b,orientation:p,dir:x,loop:m,children:(0,v.jsx)(o.sG.div,{role:"radiogroup","aria-required":i,"aria-orientation":p,"data-disabled":u?"":void 0,dir:x,...y,ref:t})})})});q.displayName=C;var D="RadioGroupItem",_=a.forwardRef((e,t)=>{let{__scopeRadioGroup:r,disabled:i,...o}=e,l=L(D,r),c=l.disabled||i,u=I(r),p=A(r),f=a.useRef(null),m=(0,s.s)(t,f),h=l.value===o.value,y=a.useRef(!1);return a.useEffect(()=>{let e=e=>{R.includes(e.key)&&(y.current=!0)},t=()=>y.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}},[]),(0,v.jsx)(d.q7,{asChild:!0,...u,focusable:!c,active:h,children:(0,v.jsx)(g,{disabled:c,required:l.required,checked:h,...p,...o,name:l.name,ref:m,onCheck:()=>l.onValueChange(o.value),onKeyDown:(0,n.m)(e=>{"Enter"===e.key&&e.preventDefault()}),onFocus:(0,n.m)(o.onFocus,()=>{var e;y.current&&(null===(e=f.current)||void 0===e||e.click())})})})});_.displayName=D;var G=a.forwardRef((e,t)=>{let{__scopeRadioGroup:r,...a}=e,n=A(r);return(0,v.jsx)(w,{...n,...a,ref:t})});G.displayName="RadioGroupIndicator";var F=q,S=_,O=G},5146:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var a=r(7589),n=r(273),s=r(6348),i=r(7316),o=r.n(i);let d=(0,r(2867).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var l=r(2748),c=r(7018);function u(e){let{params:t}=e,{id:r}=(0,n.use)(t),{data:i,isLoading:u,error:p}=(0,c.Sr)(r);if(u)return(0,a.jsx)("div",{className:"text-center",children:"Loading..."});let f=i.kpi;null==f||f.kpi_id;let v=(null==f?void 0:f.kpi_name)||"Untitled KPI",m=f.elements||[],h=(null==f?void 0:f.kpi_description)||"No description available";return(0,a.jsxs)("main",{className:"container mx-auto px-4 py-4",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsx)(o(),{href:"/qoc/builder/",children:(0,a.jsxs)(s.$,{variant:"outline",size:"sm",children:[(0,a.jsx)(d,{className:"mr-2 h-4 w-4"}),"Back to KPI Dashboard"]})})}),(0,a.jsx)("h1",{className:"mt-4 text-3xl font-bold",children:v}),(0,a.jsx)("p",{className:"mt-2 text-gray-500",children:"View and submit the form for this KPI"})]}),(0,a.jsx)("div",{className:"mx-auto max-w-3xl",children:(0,a.jsx)(l.default,{formTitle:v,elements:m,description:h})})]})}},6348:(e,t,r)=>{"use strict";r.d(t,{$:()=>d});var a=r(7589);r(273);var n=r(2544),s=r(7135),i=r(3350);let o=(0,s.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function d(e){let{className:t,variant:r,size:s,asChild:d=!1,...l}=e,c=d?n.DX:"button";return(0,a.jsx)(c,{"data-slot":"button",className:(0,i.cn)(o({variant:r,size:s,className:t})),...l})}},6775:(e,t,r)=>{"use strict";r.d(t,{b:()=>o});var a=r(273),n=r(6608),s=r(7589),i=a.forwardRef((e,t)=>(0,s.jsx)(n.sG.label,{...e,ref:t,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||(null===(r=e.onMouseDown)||void 0===r||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var o=i},7018:(e,t,r)=>{"use strict";r.d(t,{Pm:()=>c,Sr:()=>m,pH:()=>f,xx:()=>p});var a=r(7587),n=r(3269),s=r(2110),i=r(6896),o=r(295),d=r(3497);let l=async()=>(await o.A.get("/api/forms")).data.kpis;function c(){return(0,n.useQuery)({queryKey:["forms"],queryFn:l,staleTime:3e5,refetchOnWindowFocus:!1})}let u=async e=>{try{return(await o.A.post("/api/forms",e)).data}catch(e){var t,r;throw new a.y({name:"PROCESSING_ERROR",message:(null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.error)||"Failed to save form",cause:e})}};function p(){let e=(0,s.useQueryClient)();return(0,i.useMutation)({mutationFn:u,onSuccess:()=>{d.toast.success("Form saved successfully",{description:"Your form has been saved successfully"}),e.invalidateQueries({queryKey:["forms"]})},onError:e=>{d.toast.error("Error saving form",{description:e.message}),console.error("Save form error:",e.name,e.cause)}})}function f(){let e=(0,s.useQueryClient)();return(0,i.useMutation)({mutationFn:async e=>(await o.A.delete("/api/kpi/".concat(e))).data,onSuccess:()=>{d.toast.success("KPI deleted successfully",{description:"The KPI has been deleted from the backend"}),e.invalidateQueries({queryKey:["kpi"]}),e.invalidateQueries({queryKey:["forms"]})},onError:e=>{d.toast.error("Error deleting KPI",{description:e.message}),console.error("Error deleting KPI:",e)}})}let v=async e=>{let{data:t}=await o.A.get("/api/kpi/".concat(e));return console.log("Fetched form data:",t),t},m=e=>(0,n.useQuery)({queryKey:["form",e],queryFn:()=>v(e),enabled:!!e})},7586:(e,t,r)=>{Promise.resolve().then(r.bind(r,5146))},7587:(e,t,r)=>{"use strict";r.d(t,{y:()=>a});class a extends Error{constructor({name:e,message:t,cause:r}){super(t),this.name=e,this.message=t,this.cause=r}}},8033:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(2867).A)("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[7823,2546,3497,6948,4431,165,520,2205,7316,2748,8587,4266,7358],()=>t(7586)),_N_E=e.O()}]);