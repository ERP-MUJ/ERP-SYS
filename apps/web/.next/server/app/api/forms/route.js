"use strict";(()=>{var e={};e.id=4555,e.ids=[4555],e.modules={3295:e=>{e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},21820:e=>{e.exports=require("os")},28354:e=>{e.exports=require("util")},29021:e=>{e.exports=require("fs")},29294:e=>{e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{e.exports=require("path")},43821:(e,r,t)=>{t.r(r),t.d(r,{patchFetch:()=>x,routeModule:()=>l,serverHooks:()=>m,workAsyncStorage:()=>_,workUnitAsyncStorage:()=>k});var s={};t.r(s),t.d(s,{GET:()=>u,GET_BY_ID:()=>c,POST:()=>d});var i=t(31453),o=t(91306),a=t(71817),n=t(56492),p=t(3998);async function d(e){try{let r=await e.json();console.log("Request body:",r);let{id:t,title:s,elements:i,createdAt:o,value:a,description:d}=r,u=await p.prisma.kpi.create({data:{kpi_name:s||"Untitled KPI",form_data:i,kpi_description:d||"No description provided",kpi_value:a||0,kpi_created_at:o?new Date(o):new Date}});return n.NextResponse.json({message:"KPI created successfully",kpi:u})}catch(e){return console.error("Error creating KPI:",e),n.NextResponse.json({error:"Failed to create KPI"},{status:500})}}async function u(){try{let e=(await p.prisma.kpi.findMany({select:{kpi_id:!0,kpi_name:!0,kpi_created_at:!0,kpi_description:!0,kpi_value:!0,kpi_updated_at:!0,form_data:!0}})).map(e=>({id:`form-${e.kpi_id}`,title:e.kpi_name,value:e.kpi_value,description:e.kpi_description,elements:e.form_data,createdAt:e.kpi_created_at?.toISOString(),updatedAt:e.kpi_updated_at?.toISOString()}));return console.log("Fetched KPIs:",e),n.NextResponse.json({message:"KPIs fetched successfully",kpis:e})}catch(e){return console.error("Error fetching KPIs:",e),n.NextResponse.json({error:"Failed to fetch KPIs"},{status:500})}}async function c(e){try{let{searchParams:r}=new URL(e.url),t=r.get("id");if(!t)return n.NextResponse.json({error:"KPI ID is required"},{status:400});let s=await p.prisma.kpi.findUnique({where:{kpi_id:parseInt(t,10)},select:{kpi_id:!0,kpi_name:!0,kpi_created_at:!0,kpi_updated_at:!0,form_data:!0}});if(!s)return n.NextResponse.json({error:"KPI not found"},{status:404});let i={id:`form-${s.kpi_id}`,title:s.kpi_name,elements:s.form_data,createdAt:s.kpi_created_at?.toISOString(),updatedAt:s.kpi_updated_at?.toISOString()};return n.NextResponse.json(i)}catch(e){return console.error("Error fetching KPI:",e),n.NextResponse.json({error:"Failed to fetch KPI"},{status:500})}}let l=new i.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/forms/route",pathname:"/api/forms",filename:"route",bundlePath:"app/api/forms/route"},resolvedPagePath:"/Users/vverma/ERP/ERP-SYS/apps/web/app/api/forms/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:_,workUnitAsyncStorage:k,serverHooks:m}=l;function x(){return(0,a.patchFetch)({workAsyncStorage:_,workUnitAsyncStorage:k})}},44870:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{e.exports=require("crypto")},63033:e=>{e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},79646:e=>{e.exports=require("child_process")},79748:e=>{e.exports=require("fs/promises")},83997:e=>{e.exports=require("tty")},84297:e=>{e.exports=require("async_hooks")},94735:e=>{e.exports=require("events")}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[3747,3332,2302],()=>t(43821));module.exports=s})();